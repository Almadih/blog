<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Tags - Almadih&#x27;s Blog</title><meta name="gridsome:hash" content="afd6d8910b02e9c5f24460086dd68f747c7cdce3"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Almadih&#x27;s Personal Blog"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/blog/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/blog/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/blog/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/blog/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/blog/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/blog/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/blog/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/blog/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/blog/assets/css/0.styles.ca01b616.css" as="style"><link rel="preload" href="/blog/assets/js/app.6a5625b5.js" as="script"><link rel="preload" href="/blog/assets/js/page--src--templates--tag-vue.dad6a548.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules--gridsome--app--pages--404-vue.a101cea3.js"><link rel="prefetch" href="/blog/assets/js/page--src--pages--index-vue.7ac264fd.js"><link rel="prefetch" href="/blog/assets/js/page--src--templates--post-vue.9e721bbb.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.ca01b616.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text"> ← Almadih's Blog </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><h1 class="tag-title text-center space-bottom"># python</h1><div class="posts"><div class="post-card content-box"><div class="post-card__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 450' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-290a208e42e019b8a852438777b69d17'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-290a208e42e019b8a852438777b69d17)' width='860' height='450' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAhAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAAAAIEBQYHAwEI/8QALxAAAgEDAgMGBQUBAAAAAAAAAQIDAAQRBSEGEjETQVFhobEiMnFygSNEUlORwf/EABkBAAIDAQAAAAAAAAAAAAAAAAMEAAIFAf/EACMRAAEEAQIHAQAAAAAAAAAAAAEAAgMRBCExEhMUMkFhgaH/2gAMAwEAAhEDEQA/APoeuNzcwWqBrmaKFT0MjBc/7XYdazCxsbrjHWbmV762h5XICO3M6rnYKg3I861oYg%2b3ONALAyJnMIaxtuOy0uCeK4jEkEqSp/JGDD0r2zPKJIf622%2b07j/o/FUJ4F4T4ysNPs7iWYTIguQ%2bAGLkgYA6Y2PfV8PwXEb9zfpt7j196FlRANBabB1CPgzkvLXiiNCnNc554reIyXEqRRjqzsFA/JrpWearAeJuN59JuLk28cSMluD05wAc4787/ilsaATONmgBZTmblHGYC0W5xoD2r3Z31regm0uYZwvXs3DY/wApxWb69oC8GWmm30V/I2qs%2bGRAOzYDdvPHdv1z3Vo0bc8avjHMA2PDIq2RA2MB8Ztpv8VcPKfMXRyt4XNq9b3SKz3XuDNRj1OW%2b4enVO1JJj7Ts2Qnryt4eorQqi5dGjaTniubqE7kKkmFBJydqaimdEbakJYGTCneFAaBwzqL60NZ4kuVnvEACIpzuBgMxG2w8PrVxkTnjZehPQ%2bB7qYW%2bliJ0drq7kZcfNKcEjy86kRXJZHS6uVoomw6NS4n7SNW6ZG48DVa1/QLyTUhq2h3S219ygOGA5Xx0IJBwasMJ5ZXTx%2bMfnr6%2b9NhpcSrypNcKm/wq%2bAfSlYX8l5N18uwnsmPqIwOG/tEH0qnZ8KapqWqJe8SXYmCYPIH5ywG4G2yj6Ve6jV0iFABHNcoBj5ZMdM496kI0EaKijCqMCu5U/OIN7eKoBVwcbpwRw0Tubsn8SKKKKMlkUUUVFEj93F9je604oopOXuWlj9gRRRRQ0Zf/9k=' /%3e%3c/svg%3e" width="860" data-src="/blog/assets/static/twitter.07cc2b7.b0b3f37f8f26d3b662d0e86833010e57.jpg" data-srcset="/blog/assets/static/twitter.a67b0b2.b0b3f37f8f26d3b662d0e86833010e57.jpg 480w, /blog/assets/static/twitter.07cc2b7.b0b3f37f8f26d3b662d0e86833010e57.jpg 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="post-card__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/twitter.07cc2b7.b0b3f37f8f26d3b662d0e86833010e57.jpg" class="post-card__image g-image g-image--loaded" width="860" alt="Cover image"></noscript></div><div class="post-card__content"><h2 class="post-card__title">Download Videos from twitter using telegram bot</h2><p class="post-card__description">I normally don't like to whole app just to do a simple thing, I tried to download a video from twitter...</p><div class="post-meta post-card__meta">
   Posted 27. May 2022.
   <strong>1 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/blog/download-videos-from-twitter-using-telegram-bot/" class="post-card__link">Link</a></div></div><div class="post-card content-box"><div class="post-card__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 484' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-03f66e9a6f669f40b4ca1ff10ab76be5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-03f66e9a6f669f40b4ca1ff10ab76be5)' width='860' height='484' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAIAAAC2bqvFAAAACXBIWXMAAAsSAAALEgHS3X78AAAD6klEQVRYw9XS2W8bRRwH8PmLeOKJJ5544qFACCBB6cElVBUhnIQc5Kqd2F6vj/XazuXYTuqriWmTJlg5gNICXXvt9dpe37trJ3EbktjxUbdpC1KYNlULgjhrqS8jfbSa%2bY3mN9%2bftIBvzCANZOoOpIFkzY40EKvakQYi%2bzakAbo0jTRwe8%2bKNHBrZwpp4OftSaSB1TsTSAM/FMeRBhY2x5AG5gvml8oiVf7lvAjcgqkFotkrjsHvf45Il2B2CRYpHZw84eIJp2By8S%2bKHtECuQTT0cItmCVGAjM5sgW82ZYloH/XjY4cjKW5KnQuCl81tyBcXN8aCpUn2Yrjimi2Z42zOdKRM9qyBkeO9IhT01k97O%2bQHAlYM0YppjPkWApf3vRFysHZ3Pg/joipjGk2p14WP/Pnz/rFc8c7vyycvr3du/nAWbjvTFRnPIJ5Mm2cTBtsWbN/62qqEktXOaYUmMtftmZIicHAWIqQbrNRODw8ZMuMJWV4XrSkCHf0vI9tm2c/mGffP85cpH2BOyM0HFxt1smT5icdjGQCv1aYu/e4Ru9R6WryjwfbyQpXeVRhS4wxgY%2bnjCdGAsaEQQoyQeg5rVgX4ACB3YA2jpkSBKwTCaOFU3rD7d5wmzf87nGuhNtd9KnV7NfFA4%2bvYMFiuqOeujjuEdzFRrHxZ6P2uFZ%2bWDr46yHc/nhnHT4nJRjQxvVS6DlilFX5t1bgAGI9r2CVeFynjes0cQPJqZZ4%2bHs098li7uNf7/YVD7we0ayIaOFdXdygimou8674Pkfv0plqlq8Jgd0gW46uFdexGC4lGFCxOomUrBaLGjbubcEZbty9KWfUsALBo%2b9zX/qFM0vCp01mWOLPruYv5O87mX0HwekvMbiS1SkYzJqe4WtitsZHSjF6l8lUc2K9cH3DPxLRqFn9iakAbCSRnNEOhTEsSjJ7sdqjerbK/75DT2ecQ4wWZwa9TLuPeXueeed4bd7QqVv5zuKBW3gyhs3AGQbDGtjZEJ%2b4vrHClrhkJbNW/MWStA0/rUsB%2bkMa6QZCeB%2bt7goo5Ayhj1s10fHhsL4/hPXR2hF6aIL%2b3E6ftoeasdEfLmS6qZ2JcNmOx/S9QWwgpOkJqjopuYIhVKylKzDSHRyFD0mMBLqDWEt6gvA9vCugllGjHZQSLo7qXbAYxHuDqpOov6UUPQFld1Dz/O6znhQcQwUXcCs9D/iGUrdKRqk7KOyI7EVRJaOUT7/NqTsCzy7K/q9tq2HAxd%2bUSANf3BxFGjh3YwRp4KOf5EgD761dQhp4a2UYaeBN/yDSwBvLA0gDry/2Iw28du07pIFXfb1IA6/M9SDtb7cMizY%2bH0Q1AAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="860" data-src="/blog/assets/static/celery.07cc2b7.1e7fb99de7f67fa327e67d073f7413d6.png" data-srcset="/blog/assets/static/celery.a67b0b2.1e7fb99de7f67fa327e67d073f7413d6.png 480w, /blog/assets/static/celery.07cc2b7.1e7fb99de7f67fa327e67d073f7413d6.png 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="post-card__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/celery.07cc2b7.1e7fb99de7f67fa327e67d073f7413d6.png" class="post-card__image g-image g-image--loaded" width="860" alt="Cover image"></noscript></div><div class="post-card__content"><h2 class="post-card__title">Async Distributed tasks in python with Celery</h2><p class="post-card__description">I was working on a project where we need to collect data from domains, since...</p><div class="post-meta post-card__meta">
   Posted 2. May 2022.
   <strong>2 min read.</strong></div><div class="post-tags post-card__tags"></div><a href="/blog/async-distributed-tasks-in-python-with-celery/" class="post-card__link">Link</a></div></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2022.
    </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"tag":{"title":"python","belongsTo":{"edges":[{"node":{"title":"Download Videos from twitter using telegram bot","path":"\u002Fdownload-videos-from-twitter-using-telegram-bot\u002F","date":"27. May 2022","timeToRead":1,"description":"I normally don't like to whole app just to do a simple thing, I tried to download a video from twitter...","coverImage":{"type":"image","mimeType":"image\u002Fjpeg","src":"\u002Fblog\u002Fassets\u002Fstatic\u002Ftwitter.07cc2b7.b0b3f37f8f26d3b662d0e86833010e57.jpg","size":{"width":860,"height":450},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["\u002Fblog\u002Fassets\u002Fstatic\u002Ftwitter.a67b0b2.b0b3f37f8f26d3b662d0e86833010e57.jpg 480w","\u002Fblog\u002Fassets\u002Fstatic\u002Ftwitter.07cc2b7.b0b3f37f8f26d3b662d0e86833010e57.jpg 860w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 860 450' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-290a208e42e019b8a852438777b69d17'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-290a208e42e019b8a852438777b69d17)' width='860' height='450' xlink:href='data:image\u002Fjpeg%3bbase64%2c\u002F9j\u002F2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj\u002F2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj\u002FwAARCAAhAEADASIAAhEBAxEB\u002F8QAHAAAAQUBAQEAAAAAAAAAAAAAAAIEBQYHAwEI\u002F8QALxAAAgEDAgMGBQUBAAAAAAAAAQIDAAQRBSEGEjETQVFhobEiMnFygSNEUlORwf\u002FEABkBAAIDAQAAAAAAAAAAAAAAAAMEAAIFAf\u002FEACMRAAEEAQIHAQAAAAAAAAAAAAEAAgMRBCExEhMUMkFhgaH\u002F2gAMAwEAAhEDEQA\u002FAPoeuNzcwWqBrmaKFT0MjBc\u002F7XYdazCxsbrjHWbmV762h5XICO3M6rnYKg3I861oYg%2b3ONALAyJnMIaxtuOy0uCeK4jEkEqSp\u002FJGDD0r2zPKJIf622%2b07j\u002Fo\u002FFUJ4F4T4ysNPs7iWYTIguQ%2bAGLkgYA6Y2PfV8PwXEb9zfpt7j196FlRANBabB1CPgzkvLXiiNCnNc554reIyXEqRRjqzsFA\u002FJrpWearAeJuN59JuLk28cSMluD05wAc4787\u002FilsaATONmgBZTmblHGYC0W5xoD2r3Z31regm0uYZwvXs3DY\u002FwApxWb69oC8GWmm30V\u002FI2qs%2bGRAOzYDdvPHdv1z3Vo0bc8avjHMA2PDIq2RA2MB8Ztpv8VcPKfMXRyt4XNq9b3SKz3XuDNRj1OW%2b4enVO1JJj7Ts2Qnryt4eorQqi5dGjaTniubqE7kKkmFBJydqaimdEbakJYGTCneFAaBwzqL60NZ4kuVnvEACIpzuBgMxG2w8PrVxkTnjZehPQ%2bB7qYW%2bliJ0drq7kZcfNKcEjy86kRXJZHS6uVoomw6NS4n7SNW6ZG48DVa1\u002FQLyTUhq2h3S219ygOGA5Xx0IJBwasMJ5ZXTx%2bMfnr6%2b9NhpcSrypNcKm\u002Fwq%2bAfSlYX8l5N18uwnsmPqIwOG\u002FtEH0qnZ8KapqWqJe8SXYmCYPIH5ywG4G2yj6Ve6jV0iFABHNcoBj5ZMdM496kI0EaKijCqMCu5U\u002FOIN7eKoBVwcbpwRw0Tubsn8SKKKKMlkUUUVFEj93F9je604oopOXuWlj9gRRRRQ0Zf\u002F9k=' \u002F%3e%3c\u002Fsvg%3e"},"content":"\u003Cp\u003EI normally don't like to whole app just to do a simple thing, I tried to download a video from twitter first thing came in my mind is telegram there is a bot for everything, well i found one and it was unreliable. So is said le me make my own!.  \u003C\u002Fp\u003E\n\u003Ch3 id=\"twitter-api\"\u003E\u003Ca href=\"#twitter-api\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETwitter API\u003C\u002Fh3\u003E\n\u003Cp\u003EThe first problem came in my way is twitter api, to use it you must have developer account and to be honest i've applied because i have many ideas for twitter, but i got rejected and i haven't try again.\nI try to find another way and luckily i found this \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FAlmadih\u002Ftwitter-videos-downloader-bot.git\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Erepository\u003C\u002Fa\u003E it use indirect way to access the api and it work like a charm.\u003C\u002Fp\u003E\n\u003Ch3 id=\"deployment\"\u003E\u003Ca href=\"#deployment\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDeployment\u003C\u002Fh3\u003E\n\u003Cp\u003Edeploying a telegram bot was always a problem from me since it need to run alway on a server (this before i discover the perfect situation to use webhooks), recently i activated my google cloud account and now i can try the power of serverless functions!.\nSo the structure of the project is an Http-triggered cloud function which act as webhook for the bot, every time the bot receive a message the function called.  \u003C\u002Fp\u003E\n\u003Ch3 id=\"code\"\u003E\u003Ca href=\"#code\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECode\u003C\u002Fh3\u003E\n\u003Cp\u003EHere is the link to the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FAlmadih\u002Ftwitter-videos-downloader-bot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Erepository\u003C\u002Fa\u003E you can find all technical stuff there.\nAnd here is the \u003Ca href=\"https:\u002F\u002Ft.me\u002Ftwitter_vid_dl_bot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ebot\u003C\u002Fa\u003E if you want to try .\u003C\u002Fp\u003E\n"}},{"node":{"title":"Async Distributed tasks in python with Celery","path":"\u002Fasync-distributed-tasks-in-python-with-celery\u002F","date":"2. May 2022","timeToRead":2,"description":"I was working on a project where we need to collect data from domains, since...","coverImage":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fblog\u002Fassets\u002Fstatic\u002Fcelery.07cc2b7.1e7fb99de7f67fa327e67d073f7413d6.png","size":{"width":860,"height":484},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["\u002Fblog\u002Fassets\u002Fstatic\u002Fcelery.a67b0b2.1e7fb99de7f67fa327e67d073f7413d6.png 480w","\u002Fblog\u002Fassets\u002Fstatic\u002Fcelery.07cc2b7.1e7fb99de7f67fa327e67d073f7413d6.png 860w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 860 484' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-03f66e9a6f669f40b4ca1ff10ab76be5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-03f66e9a6f669f40b4ca1ff10ab76be5)' width='860' height='484' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAIAAAC2bqvFAAAACXBIWXMAAAsSAAALEgHS3X78AAAD6klEQVRYw9XS2W8bRRwH8PmLeOKJJ5544qFACCBB6cElVBUhnIQc5Kqd2F6vj\u002FXazuXYTuqriWmTJlg5gNICXXvt9dpe37trJ3EbktjxUbdpC1KYNlULgjhrqS8jfbSa%2bY3mN9%2bftIBvzCANZOoOpIFkzY40EKvakQYi%2bzakAbo0jTRwe8%2bKNHBrZwpp4OftSaSB1TsTSAM\u002FFMeRBhY2x5AG5gvml8oiVf7lvAjcgqkFotkrjsHvf45Il2B2CRYpHZw84eIJp2By8S%2bKHtECuQTT0cItmCVGAjM5sgW82ZYloH\u002FXjY4cjKW5KnQuCl81tyBcXN8aCpUn2Yrjimi2Z42zOdKRM9qyBkeO9IhT01k97O%2bQHAlYM0YppjPkWApf3vRFysHZ3Pg\u002FjoipjGk2p14WP\u002FPnz\u002FrFc8c7vyycvr3du\u002FnAWbjvTFRnPIJ5Mm2cTBtsWbN\u002F62qqEktXOaYUmMtftmZIicHAWIqQbrNRODw8ZMuMJWV4XrSkCHf0vI9tm2c\u002FmGffP85cpH2BOyM0HFxt1smT5icdjGQCv1aYu\u002Fe4Ru9R6WryjwfbyQpXeVRhS4wxgY%2bnjCdGAsaEQQoyQeg5rVgX4ACB3YA2jpkSBKwTCaOFU3rD7d5wmzf87nGuhNtd9KnV7NfFA4%2bvYMFiuqOeujjuEdzFRrHxZ6P2uFZ%2bWDr46yHc\u002FnhnHT4nJRjQxvVS6DlilFX5t1bgAGI9r2CVeFynjes0cQPJqZZ4%2bHs098li7uNf7\u002FYVD7we0ayIaOFdXdygimou8674Pkfv0plqlq8Jgd0gW46uFdexGC4lGFCxOomUrBaLGjbubcEZbty9KWfUsALBo%2b9zX\u002FqFM0vCp01mWOLPruYv5O87mX0HwekvMbiS1SkYzJqe4WtitsZHSjF6l8lUc2K9cH3DPxLRqFn9iakAbCSRnNEOhTEsSjJ7sdqjerbK\u002F75DT2ecQ4wWZwa9TLuPeXueeed4bd7QqVv5zuKBW3gyhs3AGQbDGtjZEJ%2b4vrHClrhkJbNW\u002FMWStA0\u002FrUsB%2bkMa6QZCeB%2bt7goo5Ayhj1s10fHhsL4\u002FhPXR2hF6aIL%2b3E6ftoeasdEfLmS6qZ2JcNmOx\u002FS9QWwgpOkJqjopuYIhVKylKzDSHRyFD0mMBLqDWEt6gvA9vCugllGjHZQSLo7qXbAYxHuDqpOov6UUPQFld1Dz\u002FO6znhQcQwUXcCs9D\u002FiGUrdKRqk7KOyI7EVRJaOUT7\u002FNqTsCzy7K\u002Fq9tq2HAxd%2bUSANf3BxFGjh3YwRp4KOf5EgD761dQhp4a2UYaeBN\u002FyDSwBvLA0gDry\u002F2Iw28du07pIFXfb1IA6\u002FM9SDtb7cMizY%2bH0Q1AAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e"},"content":"\u003Cp\u003EI was working on a project where we need to collect data from domains, since whe have thousands of domains and each domain require a number of tasks in order to collect the needed data, this isn't a job for one machine no matter how powerful it is, it's better to distribute the load between number of machines.\u003C\u002Fp\u003E\n\u003Ch3 id=\"ray\"\u003E\u003Ca href=\"#ray\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERay\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.ray.io\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ERay\u003C\u002Fa\u003E was the top candidate for this job, but unfortunately we faced so many issues with it and it never worked out as we want.\u003C\u002Fp\u003E\n\u003Ch3 id=\"celery\"\u003E\u003Ca href=\"#celery\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECelery\u003C\u002Fh3\u003E\n\u003Cp\u003EA colleague suggested using \u003Ca href=\"https:\u002F\u002Fdocs.celeryq.dev\u002Fen\u002Fstable\u002Fgetting-started\u002Fintroduction.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ECelery\u003C\u002Fa\u003E it was designed to work and integrated with python web frameworks like django and flask, but hey i thing we could use it this way :). \u003C\u002Fp\u003E\n\u003Ch4 id=\"getting-started\"\u003E\u003Ca href=\"#getting-started\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Egetting started\u003C\u002Fh4\u003E\n\u003Cp\u003Elet's work on scenario where we have a task the take 5 sec to complete\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"python\"\u003E\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003E\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E time \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003Esleep\n\n\u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Etask\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    sleep\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\nstart \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\ntask\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nend \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string-interpolation\"\u003E\u003Cspan class=\"token string\"\u003Ef\"time taken: \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eround\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eend \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E start\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E seconds\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Eif we run this of course it will take 5 seconds, but what if we need to run this task on let's say 20 domains, let's see the output:\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"text\"\u003E\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Etime taken: 100 seconds\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Eagain nothing strange as we know in python unless we don't use threads the event loop will be blocked, if in a case we need to run this like a couple of time we could simply use threads, but we need to run this on a scale.\u003C\u002Fp\u003E\n\u003Cp\u003EOk, let move on to celery, this a basic app with minimal configuration you probably should head to their docs.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"python\"\u003E\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003E\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E time \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E sleep\n\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E celery \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E Celery\n\napp \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Celery\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebroker\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'redis:\u002F\u002Flocalhost:6379\u002F0'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E backend\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'redis:\u002F\u002Flocalhost:6379\u002F0'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token decorator annotation punctuation\"\u003E@app\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Etask\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Etask\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    sleep\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Eand now we start celery as worker using the command\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"text\"\u003E\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ecelery -A index worker --loglevel=info --pool=threads -c 100\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Ewe should get something like this \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"text\"\u003E\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E[tasks]\n  . index.task\n\n[2022-05-02 23:09:16,403: INFO\u002FMainProcess] Connected to redis:\u002F\u002Flocalhost:6379\u002F0\n[2022-05-02 23:09:16,406: INFO\u002FMainProcess] mingle: searching for neighbors\n[2022-05-02 23:09:17,417: INFO\u002FMainProcess] mingle: all alone\n[2022-05-02 23:09:17,438: INFO\u002FMainProcess] celery@pc ready.\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Enow we have one worker ready to consume tasks, of course we need multiple worker or else we haven't done any thing spacial, i will run it two more times so the total number of workers is 3.\nto execute task on celery we call \u003Ccode class=\"language-inline-text\"\u003Etask.delay()\u003C\u002Fcode\u003E it return \u003Ccode class=\"language-inline-text\"\u003EAsyncResult\u003C\u002Fcode\u003E object, we call \u003Ccode class=\"language-inline-text\"\u003Eget()\u003C\u002Fcode\u003E or \u003Ccode class=\"language-inline-text\"\u003Ewait()\u003C\u002Fcode\u003E on it to wait for its execution and get any return if it has. \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"python\"\u003E\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003E\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E time \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E time\n\u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E index \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E task\n\nresults \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\nstart \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\"token keyword\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E20\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    results\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eappend\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Etask\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Edelay\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E result \u003Cspan class=\"token keyword\"\u003Ein\u003C\u002Fspan\u003E results\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    result\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eget\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nend \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string-interpolation\"\u003E\u003Cspan class=\"token string\"\u003Ef\"time taken: \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eround\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eend \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E start\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E seconds\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Ein the above example we run the task 10 times which in the normal case should take 100 seconds, let see the improvement we made. \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"text\"\u003E\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Etime taken: 5 seconds\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003Ewow! from 100 to only just 5 seconds, of course this a simple example real life way complicated, but we get the idea.\nI know this not beginners friendly tutorial the goal is just to show case celery and what it can do. \u003C\u002Fp\u003E\n"}}]}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.6a5625b5.js" defer></script><script src="/blog/assets/js/page--src--templates--tag-vue.dad6a548.js" defer></script>
  </body>
</html>